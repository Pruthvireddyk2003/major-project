{"version":3,"sources":["turbopack:///[project]/app/dashboard/Dashboard.tsx","turbopack:///[project]/app/components/DrowsinessChart.tsx","turbopack:///[project]/app/components/EmotionChart.tsx","turbopack:///[project]/app/components/DashboardSummary.tsx","turbopack:///[project]/app/lib/auth.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport toast from \"react-hot-toast\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nimport DrowsinessChart from \"@/components/DrowsinessChart\";\r\nimport EmotionChart from \"@/components/EmotionChart\";\r\nimport DashboardSummary from \"@/components/DashboardSummary\";\r\nimport { getToken, requireAuth } from \"@/lib/auth\";\r\n\r\ninterface DriverLog {\r\n  id: string;\r\n  drowsiness?: number;\r\n  emotion?: string;\r\n  timestamp?: string;\r\n  createdAt: string;\r\n}\r\n\r\ntype ViewResolution = \"hourly\" | \"daily\" | \"weekly\";\r\ntype RangePreset = \"7d\" | \"15d\" | \"90d\" | \"custom\";\r\n\r\nexport default function Dashboard() {\r\n  const router = useRouter();\r\n  const [logs, setLogs] = useState<DriverLog[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [resolution, setResolution] = useState<ViewResolution>(\"hourly\");\r\n\r\n  const [rangePreset, setRangePreset] = useState<RangePreset>(\"7d\");\r\n  const [customFrom, setCustomFrom] = useState<string>(\"\");\r\n  const [customTo, setCustomTo] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    requireAuth();\r\n    const driverId = localStorage.getItem(\"driverId\");\r\n    if (!driverId) return;\r\n\r\n    const fetchLogs = async () => {\r\n      try {\r\n        const token = getToken();\r\n        const res = await fetch(`/api/logs/driver?driverId=${driverId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (!res.ok) throw new Error(\"Failed to fetch logs\");\r\n        const data = await res.json();\r\n        setLogs(data.logs);\r\n      } catch (err: any) {\r\n        toast.error(err.message || \"Failed to load dashboard\");\r\n        router.push(\"/login\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLogs();\r\n  }, [router]);\r\n\r\n  const filteredLogs = useMemo(() => {\r\n    if (!logs?.length) return [];\r\n\r\n    const now = new Date();\r\n    let from: Date;\r\n    let to: Date = now;\r\n\r\n    if (rangePreset === \"custom\" && customFrom && customTo) {\r\n      const f = new Date(customFrom);\r\n      const t = new Date(customTo);\r\n      if (isNaN(f.getTime()) || isNaN(t.getTime())) {\r\n        return logs;\r\n      }\r\n      from = f;\r\n      to = t;\r\n    } else {\r\n      from = new Date();\r\n      if (rangePreset === \"7d\") {\r\n        from.setDate(now.getDate() - 7);\r\n      } else if (rangePreset === \"15d\") {\r\n        from.setDate(now.getDate() - 15);\r\n      } else if (rangePreset === \"90d\") {\r\n        from.setDate(now.getDate() - 90);\r\n      } else {\r\n        from.setDate(now.getDate() - 7);\r\n      }\r\n    }\r\n\r\n    return logs.filter((log) => {\r\n      const d = new Date((log as any).timestamp || log.createdAt);\r\n      if (isNaN(d.getTime())) return false;\r\n      return d >= from && d <= to;\r\n    });\r\n  }, [logs, rangePreset, customFrom, customTo]);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col items-center justify-center gap-6 bg-gray-50\">\r\n        <motion.div\r\n          className=\"w-64 h-6 bg-gray-200 rounded-full\"\r\n          animate={{ opacity: [0.3, 0.7, 0.3] }}\r\n          transition={{ repeat: Infinity, duration: 1.2 }}\r\n        />\r\n        <motion.div\r\n          className=\"w-80 h-48 bg-gray-200 rounded-2xl\"\r\n          animate={{ opacity: [0.3, 0.7, 0.3] }}\r\n          transition={{ repeat: Infinity, duration: 1.2, delay: 0.2 }}\r\n        />\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full bg-gray-50 flex flex-col items-stretch\">\r\n      <div className=\"flex flex-col md:flex-row items-center justify-between mt-16 px-6 md:px-12 gap-4\">\r\n        <motion.h1\r\n          className=\"text-4xl font-bold text-gray-800 text-center md:text-left\"\r\n          initial={{ y: -20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          Driver Dashboard\r\n        </motion.h1>\r\n\r\n        <motion.div\r\n          className=\"flex flex-col sm:flex-row items-center gap-3\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ duration: 0.6, delay: 0.2 }}\r\n        >\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm text-gray-600\">Range:</span>\r\n            <select\r\n              className=\"border border-gray-300 rounded-md px-3 py-1 text-sm bg-white focus:ring-1 focus:ring-blue-400\"\r\n              value={rangePreset}\r\n              onChange={(e) => setRangePreset(e.target.value as RangePreset)}\r\n            >\r\n              <option value=\"7d\">Last 7 days</option>\r\n              <option value=\"15d\">Last 15 days</option>\r\n              <option value=\"90d\">Last 90 days</option>\r\n              <option value=\"custom\">Custom</option>\r\n            </select>\r\n          </div>\r\n\r\n          {rangePreset === \"custom\" && (\r\n            <div className=\"flex items-center gap-2 text-xs sm:text-sm\">\r\n              <label className=\"flex items-center gap-1\">\r\n                <span className=\"text-gray-600\">From:</span>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"border border-gray-300 rounded-md px-2 py-1 bg-white\"\r\n                  value={customFrom}\r\n                  onChange={(e) => setCustomFrom(e.target.value)}\r\n                />\r\n              </label>\r\n              <label className=\"flex items-center gap-1\">\r\n                <span className=\"text-gray-600\">To:</span>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"border border-gray-300 rounded-md px-2 py-1 bg-white\"\r\n                  value={customTo}\r\n                  onChange={(e) => setCustomTo(e.target.value)}\r\n                />\r\n              </label>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm text-gray-600\">Resolution:</span>\r\n            <select\r\n              className=\"border border-gray-300 rounded-md px-3 py-1 text-sm bg-white focus:ring-1 focus:ring-blue-400\"\r\n              value={resolution}\r\n              onChange={(e) => setResolution(e.target.value as ViewResolution)}\r\n            >\r\n              <option value=\"hourly\">Hourly</option>\r\n              <option value=\"daily\">Daily</option>\r\n              <option value=\"weekly\">Weekly</option>\r\n            </select>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n\r\n      <motion.div\r\n        className=\"w-full mt-12 flex flex-col md:flex-row gap-6 px-6 md:px-12\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 0.6, delay: 0.2 }}\r\n      >\r\n        <DashboardSummary logs={filteredLogs} />\r\n      </motion.div>\r\n\r\n      <div className=\"w-full mt-16 flex flex-col lg:flex-row gap-6 px-6 md:px-12 pb-12\">\r\n        <motion.div\r\n          className=\"lg:flex-[2] bg-white rounded-2xl shadow-lg p-6 min-h-[400px]\"\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.6, delay: 0.3 }}\r\n        >\r\n          <h2 className=\"text-xl font-semibold mb-4\">Drowsiness Trends</h2>\r\n          <DrowsinessChart logs={filteredLogs} view={resolution} />\r\n        </motion.div>\r\n\r\n        <motion.div\r\n          className=\"lg:flex-[1] bg-white rounded-2xl shadow-lg p-6 min-h-[400px]\"\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.6, delay: 0.4 }}\r\n        >\r\n          <h2 className=\"text-xl font-semibold mb-4\">Emotion Distribution</h2>\r\n          <EmotionChart logs={filteredLogs} view={resolution} />\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  Chart as ChartJS,\r\n  LineElement,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(\r\n  LineElement,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\ntype ViewMode = \"hourly\" | \"daily\" | \"weekly\";\r\n\r\nexport default function DrowsinessChart({\r\n  logs,\r\n  view,\r\n}: {\r\n  logs: any[];\r\n  view: ViewMode;\r\n}) {\r\n  const aggregatedLogs = useMemo(() => {\r\n    if (!logs?.length) return [];\r\n\r\n    const grouped: Record<string, { sum: number; count: number; ts: number }> =\r\n      {};\r\n\r\n    for (const log of logs) {\r\n      const d = new Date(log.timestamp || log.createdAt);\r\n      if (isNaN(d.getTime())) continue;\r\n\r\n      let key = \"\";\r\n      if (view === \"hourly\") {\r\n        key = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(\r\n          2,\r\n          \"0\"\r\n        )}-${String(d.getDate()).padStart(2, \"0\")} ${String(\r\n          d.getHours()\r\n        ).padStart(2, \"0\")}:00`;\r\n      } else if (view === \"daily\") {\r\n        key = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(\r\n          2,\r\n          \"0\"\r\n        )}-${String(d.getDate()).padStart(2, \"0\")}`;\r\n      } else {\r\n        const firstDay = new Date(d.getFullYear(), 0, 1);\r\n        const weekNum = Math.ceil(\r\n          ((d.getTime() - firstDay.getTime()) / 86400000 +\r\n            firstDay.getDay() +\r\n            1) /\r\n            7\r\n        );\r\n        key = `${d.getFullYear()}-W${weekNum}`;\r\n      }\r\n\r\n      if (!grouped[key]) {\r\n        grouped[key] = { sum: 0, count: 0, ts: d.getTime() };\r\n      }\r\n      grouped[key].sum += log.drowsiness ?? 0;\r\n      grouped[key].count += 1;\r\n    }\r\n\r\n    return Object.entries(grouped)\r\n      .map(([period, { sum, count, ts }]) => ({\r\n        period,\r\n        avg: sum / count,\r\n        ts,\r\n      }))\r\n      .sort((a, b) => a.ts - b.ts);\r\n  }, [logs, view]);\r\n\r\n  const data = {\r\n    labels: aggregatedLogs.map((entry) => {\r\n      if (view === \"weekly\") return entry.period;\r\n\r\n      const d = new Date(entry.ts);\r\n      if (view === \"hourly\")\r\n        return d.toLocaleString([], {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n          hour: \"numeric\",\r\n        });\r\n      if (view === \"daily\")\r\n        return d.toLocaleDateString([], { month: \"short\", day: \"numeric\" });\r\n      return entry.period;\r\n    }),\r\n    datasets: [\r\n      {\r\n        label: `Avg Drowsiness (${\r\n          view.charAt(0).toUpperCase() + view.slice(1)\r\n        })`,\r\n        data: aggregatedLogs.map((entry) => entry.avg),\r\n        borderColor: \"#2563EB\",\r\n        backgroundColor: \"rgba(37, 99, 235, 0.2)\",\r\n        tension: 0.3,\r\n        fill: true,\r\n        pointRadius: 4,\r\n        pointHoverRadius: 7,\r\n        pointBackgroundColor: \"#2563EB\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: { display: false },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (ctx: any) => `Avg Drowsiness: ${ctx.parsed.y.toFixed(2)}`,\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      y: { min: 0, max: 1, title: { display: true, text: \"Drowsiness Level\" } },\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: view.charAt(0).toUpperCase() + view.slice(1),\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"flex flex-col flex-1\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n    >\r\n      <div className=\"flex-1 min-h-[300px]\">\r\n        <Line data={data} options={options} />\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  Chart as ChartJS,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  ChartOptions,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\ntype ViewMode = \"hourly\" | \"daily\" | \"weekly\";\r\n\r\nexport default function EmotionChart({\r\n  logs,\r\n  view,\r\n}: {\r\n  logs: any[];\r\n  view: ViewMode;\r\n}) {\r\n  const emotionCounts = logs.reduce((acc: Record<string, number>, log) => {\r\n    if (log.emotion) acc[log.emotion] = (acc[log.emotion] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n\r\n  const data = {\r\n    labels: Object.keys(emotionCounts),\r\n    datasets: [\r\n      {\r\n        data: Object.values(emotionCounts),\r\n        backgroundColor: [\r\n          \"#3B82F6\",\r\n          \"#EF4444\",\r\n          \"#10B981\",\r\n          \"#F59E0B\",\r\n          \"#8B5CF6\",\r\n          \"#EC4899\",\r\n          \"#6366F1\",\r\n          \"#14B8A6\",\r\n        ],\r\n        borderWidth: 2,\r\n        borderColor: \"#fff\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options: ChartOptions<\"pie\"> = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    animation: false,\r\n    plugins: {\r\n      legend: { display: true, position: \"right\" },\r\n      tooltip: { enabled: true },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"flex-1 h-[300px]\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.4 }}\r\n    >\r\n      <div className=\"text-xs text-gray-500 mb-2 text-right\">\r\n        {view === \"hourly\" && \"Last 7 days\"}\r\n        {view === \"daily\" && \"Last 15 days\"}\r\n        {view === \"weekly\" && \"Last 90 days\"}\r\n      </div>\r\n      <div className=\"w-full h-full\">\r\n        <Pie data={data} options={options} />\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function DashboardSummary({ logs }: { logs: any[] }) {\r\n  const summary = useMemo(() => {\r\n    if (!logs.length) return null;\r\n\r\n    // Average drowsiness\r\n    const drowsinessVals = logs.map((l) => l.drowsiness ?? 0);\r\n    const avgDrowsiness =\r\n      drowsinessVals.reduce((a, b) => a + b, 0) / drowsinessVals.length;\r\n\r\n    // Emotion frequency\r\n    const emotionFreq: Record<string, number> = {};\r\n    for (const log of logs) {\r\n      if (log.emotion)\r\n        emotionFreq[log.emotion] = (emotionFreq[log.emotion] || 0) + 1;\r\n    }\r\n    const frequentEmotion =\r\n      Object.entries(emotionFreq).sort((a, b) => b[1] - a[1])[0]?.[0] ||\r\n      \"Unknown\";\r\n\r\n    // Emotion scoring\r\n    const emotionScoreMap: Record<string, number> = {\r\n      HAPPY: 1,\r\n      CALM: 1,\r\n      NEUTRAL: 0.8,\r\n      SAD: 0.5,\r\n      ANGRY: 0.3,\r\n      UNKNOWN: 0.7,\r\n    };\r\n    const positiveEmotionScore =\r\n      emotionScoreMap[frequentEmotion.toUpperCase()] ?? 0.7;\r\n\r\n    // Combined score\r\n    const drivingScore = Math.max(\r\n      0,\r\n      Math.round((1 - avgDrowsiness) * 70 + positiveEmotionScore * 30)\r\n    );\r\n\r\n    // Suggestion\r\n    let suggestion = \"Good performance.\";\r\n    if (avgDrowsiness > 0.6 || positiveEmotionScore < 0.5)\r\n      suggestion = \"Take a break — you seem tired or stressed.\";\r\n    else if (avgDrowsiness > 0.4 || positiveEmotionScore < 0.7)\r\n      suggestion = \"Drive carefully — alertness or mood dropping.\";\r\n\r\n    return { avgDrowsiness, frequentEmotion, drivingScore, suggestion };\r\n  }, [logs]);\r\n\r\n  if (!summary)\r\n    return <p className=\"text-gray-500 text-center mt-6\">No data available.</p>;\r\n\r\n  const cards = [\r\n    {\r\n      title: \"Avg Drowsiness\",\r\n      value: `${(summary.avgDrowsiness * 100).toFixed(2)}%`,\r\n      color: \"from-blue-400 to-blue-600\",\r\n      svg: (\r\n        <svg\r\n          className=\"w-6 h-6 text-blue-500\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth={2}\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Frequent Emotion\",\r\n      value: summary.frequentEmotion.toUpperCase(),\r\n      color: \"from-purple-400 to-purple-600\",\r\n      svg: (\r\n        <svg\r\n          className=\"w-6 h-6 text-purple-500\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth={2}\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"3\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Driving Score\",\r\n      value: summary.drivingScore,\r\n      color: \"from-green-400 to-green-600\",\r\n      svg: (\r\n        <svg\r\n          className=\"w-6 h-6 text-green-500\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth={2}\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M3 12h18M12 3v18\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Suggestion\",\r\n      value: summary.suggestion,\r\n      color: \"from-amber-400 to-amber-600\",\r\n      svg: (\r\n        <svg\r\n          className=\"w-6 h-6 text-amber-500\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth={2}\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <polygon points=\"12,2 22,22 2,22\" />\r\n        </svg>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 w-full\">\r\n      {cards.map((card, idx) => (\r\n        <motion.div\r\n          key={idx}\r\n          className=\"w-full bg-white rounded-2xl shadow-lg p-6 hover:scale-105 transition-transform relative overflow-hidden\"\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.5, delay: idx * 0.1 }}\r\n        >\r\n          <div\r\n            className={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${card.color}`}\r\n          />\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-sm font-medium text-gray-500\">{card.title}</h3>\r\n            {card.svg}\r\n          </div>\r\n          <p className=\"text-xl font-bold text-gray-800 leading-snug\">\r\n            {card.value}\r\n          </p>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","// lib/auth.ts\nexport function getToken() {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(\"token\");\n}\n\nexport function requireAuth() {\n  const token = getToken();\n  if (!token) window.location.href = \"/login\";\n}\n"],"names":[],"mappings":"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"}